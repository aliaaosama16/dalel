{"version":3,"file":"src_app_modules_notifications_notifications_module_ts.js","mappings":"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","sources":["./src/app/modules/notifications/notifications-routing.module.ts","./src/app/modules/notifications/notifications.module.ts","./src/app/modules/notifications/notifications.page.ts","./src/app/services/notifications/notifications.service.ts","./src/app/modules/notifications/notifications.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationsPage } from './notifications.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationsPageRoutingModule } from './notifications-routing.module';\n\nimport { NotificationsPage } from './notifications.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificationsPageRoutingModule,\n    TranslateModule,\n    ComponentsModule,\n  ],\n  declarations: [NotificationsPage],\n})\nexport class NotificationsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController, MenuController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  NotificationsData,\n  NotificationsDataResponse,\n  NotificationsInfo,\n  NotificationsResponse,\n} from 'src/app/models/notifications';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { LanguageService } from 'src/app/services/language/language.service';\nimport { NotificationsService } from 'src/app/services/notifications/notifications.service';\nimport { UtilitiesService } from 'src/app/services/utilities/utilities.service';\n// import * as moment from 'moment';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.page.html',\n  styleUrls: ['./notifications.page.scss'],\n})\nexport class NotificationsPage implements OnInit {\n  currentlangauge: string;\n  platform: any;\n  notificationsData: NotificationsData;\n  notifications: NotificationsDataResponse[];\n  getNotifications: boolean = false;\n  noNotifications: boolean = false;\n  constructor(\n    private menuCtrl: MenuController,\n    private langaugeservice: LanguageService,\n    private util: UtilitiesService,\n    private router: Router,\n    private userNotifications: NotificationsService,\n    private alertController: AlertController,\n    private translate: TranslateService,\n    private auth: AuthService\n  ) {\n    this.platform = this.util.platform;\n    this.auth.getStoredUserID();\n    this.auth.getUserIDObservable().subscribe((val) => {\n      console.log('user id :' + val);\n      if (val != 0) {\n        this.notificationsData = {\n          lang: this.langaugeservice.getLanguage(),\n          user_id: val,\n        };\n        this.showNotification(this.notificationsData);\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.currentlangauge = this.langaugeservice.getLanguage();\n    console.log(this.currentlangauge);\n  }\n\n  openMenu() {\n    this.menuCtrl.open();\n  }\n\n  showNotification(data: NotificationsData) {\n    this.util.showLoadingSpinner().then((__) => {\n      this.userNotifications.showNotification(data).subscribe(\n        (data: NotificationsResponse) => {\n          if (data.key == 0) {\n            this.noNotifications = true;\n          } else {\n            this.notifications = data.data;\n            this.getNotifications = true;\n          }\n\n        \n          console.log('notifications' + JSON.stringify(this.notifications));\n          this.util.dismissLoading();\n        },\n        (err) => {\n          this.util.dismissLoading();\n          this.getNotifications = false;\n        }\n      );\n    });\n  }\n\n  openOrederDetails(orderID) {\n    this.router.navigateByUrl(\n      `/tabs/my-reservations/my-reservations-details/` + orderID\n    );\n  }\n\n  async deleteItem(notification_id: number) {\n    const data: NotificationsInfo = {\n      lang: this.langaugeservice.getLanguage(),\n      notification_id: notification_id,\n    };\n\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      message: this.translate.instant('confirm delete this notification'),\n      buttons: [\n        {\n          text: this.translate.instant('ok'),\n          handler: () => {\n            this.util.showLoadingSpinner().then((__) => {\n              this.userNotifications.deleteNotification(data).subscribe(\n                (data: NotificationsResponse) => {\n                  console.log(\n                    'delete item ' + JSON.stringify(this.notifications)\n                  );\n                  this.util.showMessage(data.msg);\n                  this.util.dismissLoading();\n                  this.showNotification(this.notificationsData);\n                },\n                (err) => {\n                  this.util.dismissLoading();\n                }\n              );\n            });\n          },\n        },\n        {\n          text: this.translate.instant('cancel'),\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          },\n        },\n      ],\n    });\n\n    await alert.present();\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  NotificationsData,\n  NotificationsInfo,\n  NotificationsResponse,\n} from 'src/app/models/notifications';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotificationsService {\n  constructor(private httpclient: HttpClient) {}\n\n  showNotification(data: NotificationsData): Observable<NotificationsResponse> {\n    return this.httpclient.post<NotificationsResponse>(\n      `${environment.BASE_URL}show-notification`,\n      data\n    );\n  }\n\n  deleteNotification(\n    data: NotificationsInfo\n  ): Observable<NotificationsResponse> {\n    return this.httpclient.post<NotificationsResponse>(\n      `${environment.BASE_URL}delete-notification`,\n      data\n    );\n  }\n}\n","export default \"<app-header\\n  [title]=\\\"'notifications'\\\"\\n  [backwardRoute]=\\\"'/tabs/main'\\\"\\n  [isEditable]=\\\"false\\\"\\n  [isMain]=\\\"false\\\"\\n  class=\\\"header-height\\\"\\n></app-header>\\n<!-- [ngClass]=\\\"item.isRead ? 'isRead' : ''\\\" -->\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-card\\n    class=\\\"ion-no-margin\\\"\\n    *ngIf=\\\"getNotifications && notifications.length!=0\\\"\\n  >\\n    <ion-item-sliding *ngFor=\\\"let item of notifications\\\">\\n      <ion-item (click)=\\\"openOrederDetails(item.order_id)\\\">\\n        <ul>\\n          <li>\\n            <ion-label>\\n              <h5 class=\\\"fn-14 dalel-Regular\\\">{{item.message}}</h5>\\n              <p\\n                item-start\\n                class=\\\"fn-12 dalel-Regular secondary-color\\\"\\n                [ngClass]=\\\"currentlangauge == 'ar' ? 'float-right' : 'float-left'\\\"\\n              >\\n                {{item.duration}}\\n              </p>\\n            </ion-label>\\n          </li>\\n        </ul>\\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\" (click)=\\\"deleteItem(item.id)\\\">\\n        <ion-item-option color=\\\"danger\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </ion-card>\\n\\n  <div class=\\\"no-notifications\\\" *ngIf=\\\"noNotifications\\\">\\n    <h5>{{'no-notifications'|translate}}</h5>\\n  </div>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}